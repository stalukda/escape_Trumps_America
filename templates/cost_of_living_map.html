<!DOCTYPE html>
<html>

    <head>
       <script type='text/javascript' src='https://www.google.com/jsapi'></script>
      <title> Cost of Living Index 2017</title>
    </head>

    <body>

       <h2> Cost of Living Index Throughout the World </h1>

       <div style="width:100%;" id="header_gmaps">
        <form>
             Index:  <select onchange="url= this.value"  name="indexToShow" id="indexToShow">
            <option value="/getCpiIndex" selected="selected" >Cost of Living Index</option>
            <option value="/getBreadPrice"> Average Bread Price</option>
            <option value="/getMealPrice"> Average Restaurant Meal Price </option>
            </select>

        </form>

       <div id="chart_div" class="country_gmaps_rankings"></div>
       <script type='text/javascript'>


        google.load('visualization', '1', {'packages': ['geochart']});
        google.setOnLoadCallback(updateMapData);
        
          function drawMap(results) {

              var data = new google.visualization.DataTable();
              data.addColumn('string', 'Country');
              data.addColumn('number', 'Bread price');
              data.addRows(results.items);

              var options = {
              colorAxis: {colors: [ '#551a8b', '#17e617', '#ffff00', '#e6e617', '#ffa500', '#ff0000']}}

              var chart = new google.visualization.GeoChart(document.getElementById('chart_div'));
              
              chart.draw(data, options);
          };


          function updateMapData(){

              $.get("/getBreadPrice.json", drawMap)
            }

          $('#indexToShow').on('change', updateMapData);

        </script>
    </body>
</html>



